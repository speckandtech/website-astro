---
import SpeckAndTechLogo from "../logos/SpeckAndTechLogo.astro";
import NavLinks from "../navigation/NavLinks.astro";
import NavSocials from "../navigation/NavSocials.astro";

let menuOpen = false;
---

<nav class="bg-white border-gray-200">
  <div
    class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"
  >
    <a href="/" class="flex items-center">
      <SpeckAndTechLogo />
    </a>
    <button
      id="hamburger-menu"
      data-collapse-toggle="navbar-default"
      type="button"
      class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg lg:hidden focus:outline-none focus:ring-2 focus:ring-accent"
      aria-controls="navbar-default"
      aria-expanded="false"
    >
      <span class="sr-only">Open main menu</span>
      <svg
        class="w-5 h-5"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 17 14"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M1 1h15M1 7h15M1 13h15"></path>
      </svg>
    </button>
    <div class="hidden w-full lg:block lg:w-auto" id="navbar-default">
      <NavLinks />
    </div>
    <div class="hidden w-full lg:block lg:w-auto">
      <NavSocials />
    </div>
  </div>
</nav>

<script>
  function toggleNav() {
    const menuBtn = document.querySelector("#hamburger-menu");
    const menuItems = document.querySelector("#navbar-default");

    menuBtn?.addEventListener("click", () => {
      const menuExpanded = menuBtn.getAttribute("aria-expanded") === "true";
      menuBtn.setAttribute("aria-expanded", menuExpanded ? "false" : "true");
      menuBtn.setAttribute(
        "aria-label",
        menuExpanded ? "Open Menu" : "Close Menu"
      );
      menuItems?.classList.toggle("hidden");
    });
  }

  toggleNav();

  // Runs on view transitions navigation
  document.addEventListener("astro:after-swap", toggleNav);
</script>
